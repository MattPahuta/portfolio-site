---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import { Icon } from "astro-icon/components";
// import project1 from '../assets/images/projects/frontend-quiz.png';

interface TechItem {
  name: string;
  icon: string;
}

interface Props {
  title: string;
  description: string;
  imagePath: string;
  imageAltText: string;
  techStack: TechItem[];
  gitHubUrl: string;
  liveSiteUrl: string;
}

const { title, description, imagePath, imageAltText, techStack, gitHubUrl, liveSiteUrl } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/projects/*.{jpeg,jpg,png,gif}');

if (!images[imagePath]) throw new Error(`"${imagePath}" does not exist in glob: "src/assets/projects/*.{jpeg,jpg,png,gif}"`);
---

<!-- 

flex py-6 px-2 sm:p-6 bg-black/20 sm:rounded-xl shadow-lg hover:shadow-xl sm:hover:shadow-indigo-500/20 transition duration-500 sm:border border-slate-800
-->
<!-- ToDo: Check screen reader announcement with project cards -->
<!-- <article class="flex flex-col items-center space-x-0 space-y-8 gap-8 group md:flex-row md:space-x-16 md:space-y-0"> -->
<article class="p-4 md:p-6 flex flex-col items-center gap-8 group rounded-xl md:flex-row md:space-x-16 md:space-y-0 md:bg-black/20 md:shadow-lg md:hover:shadow-xl md:hover:shadow-blue-500/20 transition duration-500 md:border md:border-slate-700">


  <!-- Image container -->
  <div class="w-full overflow-hidden rounded-lg md:shadow-lg md:rounded-xl md:group-hover:shadow-lg md:group-hover:shadow-blue-400/20 transition duration-300">
    <div class="flex flex-col items-center gap-8 transition duration-500 ease-in-out transform shadow-2xl overflow-clip rounded-2xl">
      <Image src={images[imagePath]()} alt={imageAltText} class="object-cover object-top w-full aspect-[4/3] md:group-hover:scale-105 duration-300 min-h-[275px]" />
    </div>
  </div>
  <!-- Content container -->
  <div class="w-full">
    <a href="" class="group-hover:text-blue-400 hover:underline decoration-2 underline-offset-4 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-50 transition rounded-md">
      <h3 class="text-xl sm:text-2xl font-medium text-zinc-50 group-hover:text-blue-400">
        {title}
      </h3>
    </a>
    <ul class="mb-6 flex flex-wrap items-center gap-3">
      {techStack.map((tech) => (
        <li>
          <Icon name={tech.icon} role="img" title={tech.name} class="size-6 sm:size-8" focusable="false" aria-hidden="true"
          />
          <span class="sr-only">{tech.name}</span>
        </li>
        )
      )}
    </ul>
    <p class="leading-relaxed font-light">{description}</p>
    <div class="flex items-center justify-start gap-x-3 text-sm sm:text-base">
      <a href={gitHubUrl} aria-label="GitHub project repo" class="p-1 inline-flex items-center gap-2 justify-center rounded-md hover:text-blue-400 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-50 transition">
        <Icon name="mdi:github" class="size-4 sm:size-5" role="img" />
        view code
      </a>
      <a href={liveSiteUrl} aria-label="Live preview" class="p-1 inline-flex items-center gap-2 justify-center rounded-md hover:text-blue-400 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-50 transition">
        <Icon name="mdi:external-link" class="size-4 sm:size-5" role="img" />
        live demo
      </a>
    </div>
  </div>
</article>