---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import { Icon } from "astro-icon/components";
// import project1 from '../assets/images/projects/frontend-quiz.png';

interface TechItem {
  name: string;
  icon: string;
}

interface Props {
  title: string;
  description: string;
  imagePath: string;
  imageAltText: string;
  techStack: TechItem[];
  gitHubUrl: string;
  liveSiteUrl: string;
}

const { title, description, imagePath, imageAltText, techStack, gitHubUrl, liveSiteUrl } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/projects/*.{jpeg,jpg,png,gif}');

if (!images[imagePath]) throw new Error(`"${imagePath}" does not exist in glob: "src/assets/projects/*.{jpeg,jpg,png,gif}"`);
---
<!-- ToDo: Check screen reader announcement with project cards -->
<li class="flex flex-col overflow-hidden bg-slate-950/70 rounded-lg sm:shadow-lg sm:rounded-xl sm:hover:border-blue-400/20 hover:shadow-lg sm:hover:shadow-blue-400/20 transition duration-500 sm:border border-slate-700 lg:p-6 lg:grid lg:grid-cols-2 lg:gap-6">
  <div class="">
    <a href="" class="aspect-[4/3] block isolate overflow-hidden lg:rounded-xl" aria-hidden="true" tabindex="-1">
      <Image src={images[imagePath]()} alt={imageAltText} class=" object-cover object-center" />
    </a>
  </div>
  <div class="p-5 lg:p-0 flex flex-col grow space-y-4">
    <a href="" class="hover:text-blue-400 hover:underline decoration-2 underline-offset-4 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-50 transition rounded-md">
      <h3 class="text-xl sm:text-2xl font-medium text-zinc-50 sm:text-2xl">
        {title}
      </h3>
    </a>
    <ul class="inline-flex items-center gap-3">
      {techStack.map((tech) => (
        <li>
          <Icon name={tech.icon} role="img" title={tech.name} class="size-6 sm:size-8" focusable="false" aria-hidden="true"
          />
          <span class="sr-only">{tech.name}</span>
        </li>
        )
      )}
    </ul>
    <p class="grow">{description}</p>
    <div class="pt-2 flex items-center gap-3 text-sm sm:text-base lg:justify-end">
      <a href={gitHubUrl} aria-label="GitHub project repo" class="p-1 inline-flex items-center gap-2 justify-center rounded-md hover:text-blue-400 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-50 transition">
        <Icon name="mdi:github" class="size-4 sm:size-5" role="img" />
        view code
      </a>
      <a href={liveSiteUrl} aria-label="Live preview" class="p-1 inline-flex items-center gap-2 justify-center rounded-md hover:text-blue-400 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-zinc-50 transition">
        <Icon name="mdi:external-link" class="size-4 sm:size-5" role="img" />
        live demo
      </a>
    </div>
  </div>
</li>