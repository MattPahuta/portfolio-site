---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import { Icon } from "astro-icon/components";
// import project1 from '../assets/images/projects/frontend-quiz.png';

interface TechItem {
  name: string;
  icon: string;
}

interface Props {
  title: string;
  description: string;
  imagePath: string;
  imageAltText: string;
  techStack: TechItem[];
  gitHubUrl: string;
  liveSiteUrl: string;
}

const { title, description, imagePath, imageAltText, techStack, gitHubUrl, liveSiteUrl } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/*.{jpeg,jpg,png,gif}');

if (!images[imagePath]) throw new Error(`"${imagePath}" does not exist in glob: "src/assets/projects/*.{jpeg,jpg,png,gif}"`);
---

<article class="p-8 grid gap-5 sm:gap-6 sm:grid-cols-2 rounded-lg border border-gray-700 bg-radial from-accent-dark-800 to-primary-bg-dark hover:scale-105 transition duration-300">
  <div class="space-y-6 flex flex-col">
    <h3 class="mb-1 font-mono font-semibold text-xl text-zinc-50 sm:text-2xl sm:mb-3">
      <a href="" class="underline-offset-4 hover:underline decoration-accent-500 cursor-pointer transition">
        {title}
      </a>
    </h3>
    <p class="mb-4">{description}</p>
    <ul class="flex items-center gap-3">
      {techStack.map((tech) => (
          <li>
            <Icon name={tech.icon} role="img" title={tech.name} class="size-6 sm:size-8" focusable="false" aria-hidden="true"
            />
            <span class="sr-only">{tech.name}</span>
          </li>
        )
      )}
    </ul>

    <div class="flex items-center justify-end gap-2 sm:mt-auto ">
      <!-- <a href="" class="px-1.5 py-1 inline-flex items-center justify-center rounded-sm hover:bg-accent2-dark sm:text-lg">
        View Project
        <Icon name="mdi:keyboard-arrow-right" class="size-6" />
      </a> -->
      <a href={liveSiteUrl} class="p-1 inline-flex items-center justify-center text-center rounded-md bg-gray-800 shadow-sm hover:bg-accent-500 hover:text-gray-950 transition">
        <span class="sr-only">Live preview</span>
        <Icon name="mdi:external-link" class="size-6 sm:size-8" role="img" title="View demo site" />
      </a>
      <a href={gitHubUrl} class="p-1 inline-flex items-center justify-center text-center rounded-md bg-gray-800 shadow-sm hover:bg-accent-500 hover:text-gray-950 transition">
        <span class="sr-only">View project code</span>
        <Icon name="mdi:github" class="size-6 sm:size-8" role="img" title="View project code" />
      </a>
    </div>

  </div>

  <div class="rounded-md overflow-hidden row-start-1">
    <Image src={images[imagePath]()} alt={imageAltText} class="w-full object-cover object-center" />
  </div>
</article>